<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<script src="js/args.js"></script>
		<!-- Bootstrap core CSS -->
	    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	    <link href="css/pages.css" rel="stylesheet">
	    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<link href="http://cdn.bootcss.com/lightbox2/2.9.0/css/lightbox.min.css" rel="stylesheet">
		<script src="http://cdn.bootcss.com/lightbox2/2.9.0/js/lightbox.min.js"></script>
	</head>
	<body>
		<script src="js/head.js"></script>
		<div class="blogHead">
			<img src="upload/avand/cxx.jpg" />
		</div>
		<div class="blogMain">
			<div class="blogerName">Xinxin,Chen</div>
			<div class="blogerinfo">PPSA:2017 EPSA:2017 中国摄影创意大赛金奖 216张照片 <i class="fa fa-map-marker"></i>Fuzhou,Fujian,China</div>
			<div class="blogpics">
				<a href="img/aboutpsa.jpg"  data-lightbox="image-xcode" class='picslistXcode'><img src="img/aboutpsa.jpg" class="needLoadImg" class="needLoadImg" /></a>
				<a href="img/fivestars.gif"  data-lightbox="image-xcode" class='picslistXcode' ><img src="img/fivestars.gif" class="needLoadImg" /></a>
				<a href="upload/f1.jpg"  data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f1.jpg" class="needLoadImg" /></a>
				<a href="upload/f2.jpg"  data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f2.jpg" class="needLoadImg" /></a>
				<a href="img/header-bg.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/header-bg.jpg" class="needLoadImg" /></a>
				<a href="img/loginbg.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/loginbg.jpg" class="needLoadImg" /></a>
				<a href="upload/f6.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f6.jpg" class="needLoadImg" /></a>
				<a href="upload/f3.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f3.jpg" class="needLoadImg" /></a>
				<a href="img/newsright.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/newsright.jpg" class="needLoadImg" /></a>
				<a href="img/rain.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/rain.jpg" class="needLoadImg" /></a>
				<a href="img/loginright.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/loginright.jpg" class="needLoadImg" /></a>
				<a href="img/ropa.gif" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/ropa.gif" class="needLoadImg" /></a>
				<a href="upload/f4.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f4.jpg" class="needLoadImg" /></a>
				<a href="upload/f5.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f5.jpg" class="needLoadImg" /></a>
				<a href="upload/10.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/10.jpg" class="needLoadImg" /></a>
				<a href="upload/f7.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f7.jpg" class="needLoadImg" /></a>
				<a href="upload/11.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/11.jpg" class="needLoadImg" /></a>
				<a href="upload/20170731/2.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/20170731/2.jpg" class="needLoadImg" /></a>
				<a href="upload/20170731/4.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/20170731/4.jpg" class="needLoadImg" /></a>
				<a href="upload/8.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/8.jpg" class="needLoadImg" /></a>
				<a href="upload/9.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/9.jpg" class="needLoadImg" /></a>
				<a href="img/header-bg.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/header-bg.jpg" class="needLoadImg" /></a>
				<a href="img/loginbg.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/loginbg.jpg" class="needLoadImg" /></a>
				<a href="upload/f6.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f6.jpg" class="needLoadImg" /></a>
				<a href="img/loginright.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="img/loginright.jpg" class="needLoadImg" /></a>
				<a href="upload/f3.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f3.jpg" class="needLoadImg" /></a>
				<a href="upload/f7.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f7.jpg" class="needLoadImg" /></a>
				<a href="upload/11.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/11.jpg" class="needLoadImg" /></a>
				<a href="upload/20170731/2.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/20170731/2.jpg" class="needLoadImg" /></a>
				<a href="upload/20170731/4.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/20170731/4.jpg" class="needLoadImg" /></a>
				<a href="upload/8.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/8.jpg" class="needLoadImg" /></a>
				<a href="upload/9.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/9.jpg" class="needLoadImg" /></a>
				<a href="upload/f4.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f4.jpg" class="needLoadImg" /></a>
				<a href="upload/f5.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f5.jpg" class="needLoadImg" /></a>
				<a href="upload/10.jpg" data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/10.jpg" class="needLoadImg" /></a>
				<a href="upload/f1.jpg"  data-lightbox="image-xcode" class='picslistXcode' ><img src="upload/f1.jpg" class="needLoadImg" /></a>
			</div>
			<div style="width: 100%; height: 8px; clear:both;"></div>
		</div>
		
		<script src="js/foot.js"></script>
		<script>
			var adjustPics=function(){
				var blogMainLeft = $(".blogpics").position().left;
				var listArr = $(".blogpics").children("a");
				var ww = $(document).width();
				ww = parseInt(ww * 0.98) - 8;
				listArr.each(function(index){
					var oW = $(this).width();
					var oH = $(this).height();
					var fZoom = parseFloat(220/oH);//放大比例
					$($(this).children()[0]).width(parseInt(oW / fZoom));
					$($(this).children()[0]).height(250);
					$($(this).children()[0]).css("margin-top","0");
				});
				listArr.each(function(index){
					if (listArr[index + 1]){
						//判断是不是当前行最后一个。 
						if ($(listArr[index + 1]).position().top > $(this).position().top){
							if ($(this).position().left - blogMainLeft + $(this).width()  < ww){//宽度不够
								var nW = ww + blogMainLeft - $(this).position().left - 8;//8是左侧缩进的量
								var oW = $(this).width();
								var oH = $(this).height();
								var fZoom = parseFloat(nW/oW);//放大比例
								$(this).width(nW);//重新设置宽度
								$($(this).children()[0]).width(parseInt(nW));//重新设置宽度
								$($(this).children()[0]).height(parseInt(oH * fZoom));
								//图片偏移到中心
								var offsetInt = (oH * fZoom - 250) / 2;
								$($(this).children()[0]).css("margin-top",(0-offsetInt).toString() + "px");
								
							}
						}
						
					}
				});
			};
			$(function(){
//				setTimeout(function(){adjustPics();},2000);
				var isLoaded = false;
				var num = $(".needLoadImg").length;
//				console.log(num);
				$(".needLoadImg").each(function(){
					if(this.complete) { // 如果图片已经存在于浏览器缓存，直接调用回调函数
						num--;
						if (num > 0) {
						    return;
						}
						isLoaded = true;
						adjustPics();
					    return; // 直接返回，不用再处理onload事件
					}
					this.onload = function () { //图片下载完毕时异步调用callback函数。
						num--;
						if (num > 0) {
						    return;
						}
						isLoaded = true;
						adjustPics();
					};
				});
				$(window).resize(function() {
				  	if (isLoaded)adjustPics();
				});
			});
		</script>
	</body>
</html>
